import { Suspense, lazy, useEffect, useState } from 'react'
import Head from 'next/head'
import { Grid, Row } from 'components/grid'
import Heading from 'components/heading'
import Passage from 'components/passage'
import Button from 'components/button'

import styles from 'styles/home.module.css'

const Canvas = lazy(() => import('lazy/canvas'))
const Bokeh = lazy(() => import('scenes/bokeh'))

const excerpt = 'Typography is the art and technique of arranging type to make written language legible, readable and appealing when displayed. The arrangement of type involves selecting typefaces, point sizes, line lengths, line-spacing (leading), and letter-spacing (tracking), as well as adjusting the space between pairs of letters (kerning). The term typography is also applied to the style, arrangement, and appearance of the letters, numbers, and symbols created by the process. Type design is a closely related craft, sometimes considered part of typography; most typographers do not design typefaces, and some type designers do not consider themselves typographers. Typography also may be used as an ornamental and decorative device, unrelated to the communication of information.'

const Home = () => {
  const [bokehBg, setBokehBg] = useState()
  useEffect(() => {
    setBokehBg(
      window
        .getComputedStyle(document.documentElement)
        .getPropertyValue('--bokeh-bg')
        .trim()
    )
  }, [])

  const fallbackCanvas = <div className={styles.bokehPlaceholder} />

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Suspense fallback={fallbackCanvas}>
        <figure className={styles.bokehRendererContainer}>
          <Canvas dpr={[1, 10]} gl={{ alpha: false }} shadows camera={{ position: [0, -3.2, 40], fov: 3 }}>
            <color attach="background" args={[bokehBg]} />
            <Suspense fallback={null}>
              <Bokeh />
            </Suspense>
          </Canvas>
        </figure>
      </Suspense>

      <div className={styles.page}>
        <div className={styles.content}>
          <header className={styles.header}></header>
          <main className={styles.main}>
            <section className={[styles.section, styles.hello].join(' ')}>
              <Grid>
                <Row><Heading>Hi there.</Heading></Row>
                <Row><Passage as="p1">My name's <em>Ricky.</em></Passage></Row>
                <Row><Passage as="p1">I do <em>design + code.</em></Passage></Row>
                <Row><Passage as="p1"><em>I'm looking for the next big thing. Right now.</em></Passage></Row>
                <Row>
                  <Button spans={[3]}>Say Hi</Button>
                  <Button spans={[3]}>See my CV</Button>
                </Row>
                <Row>
                  <Button spans={[3]}>Say Hi</Button>
                  <Button spans={[3]}>See my CV</Button>
                </Row>
              </Grid>
            </section>
            <Heading as="h1">Sphinx of black quartz, judge my vow.</Heading>
            <Heading as="h2">Sphinx of black quartz, judge my vow.</Heading>
            <Heading as="h3">Sphinx of black quartz, judge my vow.</Heading>
            <Heading as="h4">Sphinx of black quartz, judge my vow.</Heading>
            <Heading as="h5">Sphinx of black quartz, judge my vow.</Heading>
            <Heading as="h6">Sphinx of black quartz, judge my vow.</Heading>

            <Passage as="p1">{excerpt.split('.').slice(0, 1).join('.')}.</Passage>
            <Passage as="p2">{excerpt.split('.').slice(0, 2).join('.')}.</Passage>
            <Passage as="p3">{excerpt.split('.').slice(0, 3).join('.')}.</Passage>
            <Passage as="p4">{excerpt.split('.').slice(0, 4).join('.')}.</Passage>
          </main>
          <footer className={styles.footer}></footer>
        </div>
      </div>
    </>
  )
}

export default Home
